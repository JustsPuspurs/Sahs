import{u as I,r as t,j as e,d as W}from"./app-Dl5SKMuw.js";import B from"./Login-Cge1aFQu.js";import F from"./Register-b_76YJ5X.js";import _ from"./ChessBoard-BIUv73DO.js";import A from"./MoveList-CPuHpaPz.js";import z from"./RecordGameModal-5TIQwbpF.js";import J from"./Shop-Do0rrZ61.js";import K from"./DataPopup-Uf0hjrVD.js";import"./PC-DGm_c6IX.js";import"./BlueKing-BUktslDH.js";const ie=()=>{const{auth:n,flash:b,skins:c=[],wallet:p={coins:0},ownedSkins:d=[]}=I().props,m=b||{};t.useEffect(()=>{},[c,p,d]);const[h,u]=t.useState(d),[x,j]=t.useState(!1),[f,v]=t.useState(!1),[g,y]=t.useState([]),[O,w]=t.useState(!1),[R,k]=t.useState(0),[S,C]=t.useState(!1),[L,M]=t.useState(p.coins),[P,N]=t.useState(!1),l=t.useRef(null),E=()=>{l.current&&l.current.retireGame()},r={};h.forEach(s=>{s.pivot&&s.pivot.equipped&&(r[s.piece_type.toLowerCase()]=s.image.toLowerCase())}),console.log("Equipped Mapping White:",r);const q=()=>w(!1),D=()=>C(!1),G=(s,i)=>{M(a=>a-s),u(a=>[...a,i])},H=(s,i)=>{u(a=>a.map(o=>o.piece_type===s.piece_type?{...o,pivot:{...o.pivot,equipped:o.id===s.id?i:!1}}:o))},T=()=>{W.Inertia.post("/logout")};return e.jsxs("div",{className:"app",children:[e.jsx("div",{className:"navbar",children:n.user?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"navbar-left",children:e.jsxs("span",{children:["Welcome, ",n.user.username]})}),e.jsxs("div",{className:"navbar-right",children:[e.jsx("button",{style:{marginRight:"20px"},onClick:()=>C(!0),children:"Shop"}),e.jsx("button",{style:{marginRight:"20px"},onClick:T,children:"Logout"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"navbar-right",style:{display:"flex"},children:[e.jsx("button",{onClick:()=>v(!0),children:"Register"}),e.jsx("div",{className:"divider",style:{marginLeft:"5px",marginRight:"5px"}}),e.jsx("button",{onClick:()=>j(!0),children:"Login"})]})})}),m.message&&e.jsx("div",{children:m.message}),x&&e.jsx(B,{isOpen:x,onClose:()=>j(!1)}),f&&e.jsx(F,{isOpen:f,onClose:()=>v(!1)}),e.jsx("div",{className:"content",children:n.user?e.jsxs("div",{className:"main-content",children:[e.jsx("div",{className:"chess-section",children:e.jsxs("div",{className:"chess-container",children:[e.jsx("div",{className:"column-labels",children:["A","B","C","D","E","F","G","H"].map((s,i)=>e.jsx("div",{className:"column-label",children:s},i))}),e.jsx("div",{className:"row-labels",children:[8,7,6,5,4,3,2,1].map((s,i)=>e.jsx("div",{className:"row-label",children:s},i))}),e.jsx(_,{ref:l,moveHistory:g,setMoveHistory:y,setPlayerTotalTime:k,equippedSkinsMapping:r})]})}),e.jsx("div",{className:"sidebar",style:{width:"300px"},children:e.jsxs("div",{className:"sidebar-scrollable",children:[e.jsxs("div",{className:"move-list-section",style:{width:"100%"},children:[e.jsx(A,{movePairs:g}),e.jsx(z,{isOpen:O,onClose:q,computedTime:R})]}),e.jsxs("div",{className:"custom-buttons-container",children:[e.jsx("button",{className:"custom-button",onClick:()=>N(!0),children:"Show Game History"}),e.jsx("button",{className:"custom-button",onClick:E,children:"Retire"})]})]})})]}):e.jsxs("div",{className:"welcome-section",children:[e.jsx("h1",{children:"Welcome to Chess Game"}),e.jsx("p",{children:"Please log in or register to start playing!"})]})}),S&&e.jsx(J,{isOpen:S,onClose:D,skins:c,walletCoins:L,ownedSkins:h,onPurchase:G,onEquip:H}),e.jsx(K,{isOpen:P,onClose:()=>N(!1)})]})};export{ie as default};
