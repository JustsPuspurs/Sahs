import{u as I,r as t,j as e,d as B}from"./app-RkvOmYKx.js";import F from"./Login-PAJNq6Sb.js";import W from"./Register-F1YNjPv_.js";import _ from"./ChessBoard-Dy78rsZr.js";import A from"./MoveList-EToRRjfG.js";import z from"./RecordGameModal-B2wWDnAi.js";import J from"./Shop-DJwF3xzm.js";import K from"./DataPopup-BtfD6597.js";import"./PC-BIj-yV_i.js";import"./BlueKing-BUktslDH.js";const ie=()=>{const{auth:o,flash:C,skins:r=[],wallet:c={coins:0},ownedSkins:d=[]}=I().props,p=C||{};t.useEffect(()=>{},[r,c,d]);const[m,h]=t.useState(d),[u,x]=t.useState(!1),[j,f]=t.useState(!1),[v,y]=t.useState([]),[O,R]=t.useState(!1),[w,k]=t.useState(0),[g,S]=t.useState(!1),[L,P]=t.useState(c.coins),[M,N]=t.useState(!1),l=t.useRef(null),E=()=>{l.current&&l.current.retireGame()},b={};m.forEach(s=>{s.pivot&&s.pivot.equipped&&(b[s.piece_type]=s.image)});const q=()=>R(!1),D=()=>S(!1),G=(s,i)=>{P(a=>a-s),h(a=>[...a,i])},H=(s,i)=>{h(a=>a.map(n=>n.piece_type===s.piece_type?{...n,pivot:{...n.pivot,equipped:n.id===s.id?i:!1}}:n))},T=()=>{B.Inertia.post("/logout")};return e.jsxs("div",{className:"app",children:[e.jsx("div",{className:"navbar",children:o.user?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"navbar-left",children:e.jsxs("span",{children:["Welcome, ",o.user.username]})}),e.jsxs("div",{className:"navbar-right",children:[e.jsx("button",{style:{marginRight:"20px"},onClick:()=>S(!0),children:"Shop"}),e.jsx("button",{style:{marginRight:"20px"},onClick:T,children:"Logout"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"navbar-right",style:{display:"flex"},children:[e.jsx("button",{onClick:()=>f(!0),children:"Register"}),e.jsx("div",{className:"divider",style:{marginLeft:"5px",marginRight:"5px"}}),e.jsx("button",{onClick:()=>x(!0),children:"Login"})]})})}),p.message&&e.jsx("div",{children:p.message}),u&&e.jsx(F,{isOpen:u,onClose:()=>x(!1)}),j&&e.jsx(W,{isOpen:j,onClose:()=>f(!1)}),e.jsx("div",{className:"content",children:o.user?e.jsxs("div",{className:"main-content",children:[e.jsx("div",{className:"chess-section",children:e.jsxs("div",{className:"chess-container",children:[e.jsx("div",{className:"column-labels",children:["A","B","C","D","E","F","G","H"].map((s,i)=>e.jsx("div",{className:"column-label",children:s},i))}),e.jsx("div",{className:"row-labels",children:[8,7,6,5,4,3,2,1].map((s,i)=>e.jsx("div",{className:"row-label",children:s},i))}),e.jsx(_,{ref:l,moveHistory:v,setMoveHistory:y,setPlayerTotalTime:k,equippedSkinsMapping:b})]})}),e.jsx("div",{className:"sidebar",style:{width:"300px"},children:e.jsxs("div",{className:"sidebar-scrollable",children:[e.jsxs("div",{className:"move-list-section",style:{width:"100%"},children:[e.jsx(A,{movePairs:v}),e.jsx(z,{isOpen:O,onClose:q,computedTime:w})]}),e.jsxs("div",{className:"custom-buttons-container",children:[e.jsx("button",{className:"custom-button",onClick:()=>N(!0),children:"Show Game History"}),e.jsx("button",{className:"custom-button",onClick:E,children:"Retire"})]})]})})]}):e.jsxs("div",{className:"welcome-section",children:[e.jsx("h1",{children:"Welcome to Chess Game"}),e.jsx("p",{children:"Please log in or register to start playing!"})]})}),g&&e.jsx(J,{isOpen:g,onClose:D,skins:r,walletCoins:L,ownedSkins:m,onPurchase:G,onEquip:H}),e.jsx(K,{isOpen:M,onClose:()=>N(!1)})]})};export{ie as default};
